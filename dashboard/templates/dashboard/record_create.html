{% extends 'main.html' %}

{% block content %}

{% load static %}


<div class="container mt-5">
        <h1>ADD RECORD</h1>
        <hr>

                        <form action="" method="post" class="row g-3 pb-4" enctype="multipart/form-data">
                                {% csrf_token %}
                                <!-- {% for hidden in form.hidden_fields %}
                                        {{ hidden }}
                                {% endfor %} -->
                                
                                <div class="col-md-12 sticky-top p-2 border border-dark rounded" style="background-color: gainsboro;">

                                        <input class="btn btn-primary btn-lg px-3" type="submit" value="SUBMIT">
        
                                        <a class="btn btn-danger btn-lg px-2" href="{% url 'dashboard' %}" role="button">CANCEL</a>

                                        <a class="btn btn-light btn-outline-dark btn-lg px-2" href="{% url 'admin:index' %}" role="button" target="_blank">Open DB in new tab</a>

                                        <a class="btn btn-light btn-outline-dark btn-lg px-2" href="{{ request.get_full_path }}">Reload</a>
        
                                </div>

                                <div class="row mt-3">
                                        
                                        <div class="col-md-4 ">
                                                <div class="card">
                                                        <div class="text-truncate card-header">
                                                                {{ form.ncr_number.label}}
                                                        </div>
                                                        <div class="card-body">
                                                                <p>NCR Number: {{ context_number }}</p>
                                                                <!-- {{ reset_number }}
                                                                {{ hardcode_ncr_number }} -->
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="col-md-4 ">
                                                <div class="card">
                                                        <div class="text-truncate card-header">
                                                                {{ form.advice_number.label }}
                                                                
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.advice_number }}
                                                                

                                                        </div>
                                                </div>
                                        </div>

                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.severity.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.severity}}
                                                        </div>
                                                </div>

                                        </div>
                                </div>
                                <div class="row mt-3">

                                        <div class="col-md-4">

                                                <div class="card" style="height: 15rem;">
                                                        <div class="card-header">
                                                                {{ form.the_subject_responsible.label }}
                                                        </div>
                                                        <div class="card-body" >
                                                                <div class="container">
                                                                        <input type="text" class = "form-control mb-2" placeholder=" Search..." id="the_subject_responsible-search" >
                                                                        <!-- overflow-y: scroll; or overflow-scroll -->
                                                                        <ul id="employeeForm" class="list-group overflow-auto" style=" height: 7.5rem; "  >
                                                                                {% for item in form.the_subject_responsible %}
                                                                                <li class=" full_width_li list-group-item " id="subject_responsible_list">{{item}}</li>
                                                                                {% endfor %}
                                                                        </ul>

                                                                </div>
                                                        </div>
                                                </div>


                                        </div>
                                        
                                        <div class="col-md-4">


                                                <div class="card" style="height: 15rem;">
                                                        <div class="card-header">
                                                                {{ form.supervisor.label }}
                                                        </div>
                                                        <div class="card-body">

                                                                <ul id="employeeForm" class="list-group overflow-auto"   >
                                                                        {% for supervisor_obj in form.supervisor%}
                                                                        <li class="full_width_li list-group-item" >{{supervisor_obj  }}</li>
                                                                        {% endfor %}
                                                                </ul>
                                                        </div>
                                                </div>
                                        </div>

                                        <div class="col-md-4">

                                                <div class="card" style=" height: 15rem;">
                                                        <div class="card-header">
                                                                {{ form.location.label }}
                                                        </div>
                                                        <div class="card-body">

                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >
                                                                        {% for location_obj in form.location%}
                                                                        <li class="full_width_li list-group-item" >{{location_obj  }}</li>
                                                                        {% endfor %}
                                                                </ul>

                                                        </div>
                                                </div>
                                        </div>

                                </div>
                                <div class="row mt-3">
                                        <div class="col-md-4">
                                                <div class="card" style=" height: 15rem;">
                                                        <div class="card-header">
                                                                {{ form.jb_client.label }}
                                                        </div>
                                                        <div class="card-body " >
                                                                <div class="container">
                                                                        <input type="text" class = "form-control mb-2" placeholder=" Search Client..." id="client-search">
                                                                        <!-- overflow-y: scroll; or overflow-scroll -->
                                                                        <ul id="employeeForm" class="list-group overflow-auto" style=" height: 7.5rem; " >
                                                                                {% for item in form.jb_client %}
                                                                                <li class=" full_width_li list-group-item" id="client_list">{{item}}</li>
                                                                                {% endfor %}
                                                                        </ul>

                                                                </div>
                                                        </div>
                                                </div>

                                        </div>

                                        <div class="col-md-4">
                                                <div class="card" style=" height: 15rem;">
                                                        <div class="card-header">
                                                                {{ form.production_issue.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >
                                                                        {% for production_issue_obj in form.production_issue%}
                                                                        <li class="full_width_li list-group-item" >{{production_issue_obj  }}</li>
                                                                        {% endfor %}
                                                                </ul>
                                                        </div>
                                                </div>
                                        </div>



                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.issue_date.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >                                                                
                                                                        {{ form.issue_date}}


                                                                </ul>
                                                        </div>
                                                </div>
                                        </div>


                                        <div class="col-md-4">
                                                <div class="card" style=" height: 15rem;">
                                                        <div class="card-header">
                                                                {{ form.area.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >
                                                                        {% for area_obj in form.area%}
                                                                        <li class="full_width_li list-group-item" >{{area_obj  }}</li>
                                                                        {% endfor %}

                                                                </ul>
                                                        </div>
                                                </div>
                                        </div>

                                        
                                </div>
                                <div class="row mt-3">
                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.customer_issues.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >
                                                                        {% for customer_issues_obj in form.customer_issues%}
                                                                        <li class="full_width_li list-group-item" >{{customer_issues_obj  }}</li>
                                                                        {% endfor %}
                                                                </ul>
                                                        </div>
                                                </div>


                                        </div>
                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.other_issues.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >
                                                                        {% for other_issues_obj in form.other_issues%}
                                                                        <li class="full_width_li list-group-item" >{{other_issues_obj  }}</li>
                                                                        {% endfor %}
                                                                </ul>
                                                        </div>
                                                </div>


                                        </div>
                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.supplier_issue.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                <ul id="employeeForm" class="list-group overflow-auto" style=" height: 10rem;" >
                                                                        {% for supplier_issue_obj in form.supplier_issue%}
                                                                        <li class="full_width_li list-group-item" >{{supplier_issue_obj  }}</li>
                                                                        {% endfor %}
                                                                </ul>
                                                        </div>
                                                </div>


                                        </div>

                                </div>

                                <div class="row mt-3">
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.estimated_completion_time.label}}
                                                        </div>
                                                        <div class="card-body">
                                                                <div class="row ">
                                                                        <div class="col-md-8 ">
                                                                                <div class="input-group">

                                                                                        <input type="number" class="form-control" placeholder="DD" aria-label="Days" id="EstCompDayConversion"  oninput="add_number_comp_time()">
                                                                                        <span class="input-group-text"> : </span>
                                                                                        <input type="number" class="form-control" placeholder="HH" aria-label="Hours" id="EstCompHourConversion"  oninput="add_number_comp_time()">
                                                                                        <span class="input-group-text"> : </span>
                                                                                        <input type="number" class="form-control" placeholder="MM" aria-label="Minutes"  id="EstCompMinuteConversion"  oninput="add_number_comp_time()">

                                                                                </div>
                                                                        </div>


                                                                        <div class="col-md-4 ">
                                                                                        {{ form.estimated_completion_time}}

                                                                        </div>
                                                                </div>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.downtime_time.label}}
                                                        </div>
                                                        <div class="card-body">
                                                                <div class="row ">
                                                                        <div class="col-md-8 ">
                                                                                <div class="input-group">

                                                                                        <input type="number" class="form-control" placeholder="DD" aria-label="Days" id="DayConversion"  oninput="add_number()">
                                                                                        <span class="input-group-text"> : </span>
                                                                                        <input type="number" class="form-control" placeholder="HH" aria-label="Hours" id="HourConversion"  oninput="add_number()">
                                                                                        <span class="input-group-text"> : </span>
                                                                                        <input type="number" class="form-control" placeholder="MM" aria-label="Minutes"  id="MinuteConversion"  oninput="add_number()">

                                                                                </div>
                                                                        </div>


                                                                        <div class="col-md-4 ">
                                                                                        {{ form.downtime_time}}
                                                                        </div>
                                                                </div>
                                                        </div>
                                                </div>
                                        </div>




                                </div>




                                <div class="row mt-3">

                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.description.label }} 
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.description}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.comments.label }} 
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.comments}}
                                                        </div>
                                                </div>

                                        </div>

                                </div>

                                <div class="row mt-3">

                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.target_completion_date.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.target_completion_date}}
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.closure_date.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.closure_date}}
                                                        </div>
                                                </div>
                                        </div>                              
                                </div>


                                
                                <div class="row mt-3">

                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.prevented_reoccurrence.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.prevented_reoccurrence}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.issue_solved.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.issue_solved}}
                                                        </div>
                                                </div>

                                        </div>


                                </div>
                                <div class="row mt-3">
                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.root_cause.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.root_cause}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.job_reference_number.label}}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.job_reference_number}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-4">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.cost.label }} 
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.cost}}
                                                        </div>
                                                </div>

                                        </div>

                                </div>
                                



                                <div class="row mt-3">

                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.interim_containment_action.label }} 
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.interim_containment_action}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.corrective_action.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.corrective_action}}
                                                        </div>
                                                </div>

                                        </div>

                                </div>

                                
                                <div class="row mt-3">

                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.result_validation_action.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.result_validation_action}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.printed_by.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.printed_by }}
                                                        </div>
                                                </div>

                                        </div>

                                </div>

                                <div class="row mt-3">

                                        <div class="col-md-6">
                                                <div class="card">
                                                        <div class="card-header">
                                                                {{ form.issue_affect_other_areas.label }}
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.issue_affect_other_areas}}
                                                        </div>
                                                </div>

                                        </div>
                                        <div class="col-md-6">
                                                <div class="card d-none" id = "issue_affect_other_areas_card">
                                                        <div class="card-header">
                                                                If Yes, Description
                                                        </div>
                                                        <div class="card-body">
                                                                {{ form.issue_affect_other_areas_description}}
                                                        </div>
                                                </div>

                                        </div>

                                </div>

                                <div class="row mt-3">

                                        <div class="col-md-12">
                                                <div class="card">
                                                        <div class="card-header">
                                                                Image upload (select multiple)
                                                        </div>
                                                        <div class="card-body">      
                                                                {{ imageform.management_form }}
                                                                {% for form in imageform %}
                                                                        {{ form }}
                                                                {% endfor %}
                                                        </div>
                                                </div>

                                        </div>

                                </div>


                                <div class="col-md-12 m-2 p-2 border border-dark rounded" style="background-color: gainsboro;">

                                        <input class="btn btn-primary btn-lg px-3" type="submit" value="SUBMIT">
        
                                        <a class="btn btn-danger btn-lg px-2" href="{% url 'dashboard' %}" role="button">CANCEL</a>
        
                                </div>
                        </form>

                </div>


{% endblock content %}



<!-- <a class="btn btn-secondary" href="{% url 'production_issue_update' %}" role="button" target="_blank" rel="noopener">Add issue</a> -->
